{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/app/dashboard/owner/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function OwnerDashboard() {\r\n  const [tab, setTab] = useState<\"leads\" | \"properties\">(\"leads\");\r\n\r\n  const [owners, setOwners] = useState<any[]>([]);\r\n  const [ownerId, setOwnerId] = useState(\"\");\r\n\r\n  const [properties, setProperties] = useState<any[]>([]);\r\n  const [propertyId, setPropertyId] = useState(\"\");\r\n\r\n  // ROOMS\r\n  const [rooms, setRooms] = useState<any[]>([]);\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomPrice, setRoomPrice] = useState(\"\");\r\n\r\n  // LEADS (kept for later steps)\r\n  const [leads, setLeads] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetchOwners();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (ownerId) fetchProperties(ownerId);\r\n  }, [ownerId]);\r\n\r\n  useEffect(() => {\r\n    if (propertyId) fetchRooms(propertyId);\r\n  }, [propertyId]);\r\n\r\n  const fetchOwners = async () => {\r\n    const { data } = await supabase.from(\"owners\").select(\"*\");\r\n    setOwners(data || []);\r\n  };\r\n\r\n  const fetchProperties = async (oid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"properties\")\r\n      .select(\"*\")\r\n      .eq(\"owner_id\", oid);\r\n\r\n    setProperties(data || []);\r\n    setPropertyId(\"\");\r\n    setRooms([]);\r\n  };\r\n\r\n  const fetchRooms = async (pid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"rooms\")\r\n      .select(\"*\")\r\n      .eq(\"property_id\", pid)\r\n      .order(\"created_at\");\r\n\r\n    setRooms(data || []);\r\n  };\r\n\r\n  const addRoom = async () => {\r\n    if (!roomName || !roomPrice || !propertyId)\r\n      return alert(\"Fill all fields\");\r\n\r\n    const { data, error } = await supabase.from(\"rooms\").insert({\r\n  property_id: propertyId,\r\n  name: roomName,\r\n  price: Number(roomPrice),\r\n});\r\n\r\nconsole.log(\"ROOM INSERT ERROR FULL:\", JSON.stringify(error, null, 2));\r\n\r\n\r\n    setRoomName(\"\");\r\n    setRoomPrice(\"\");\r\n    fetchRooms(propertyId);\r\n  };\r\n\r\n  const toggleRoom = async (roomId: string, isActive: boolean) => {\r\n    await supabase\r\n      .from(\"rooms\")\r\n      .update({ is_active: !isActive })\r\n      .eq(\"id\", roomId);\r\n\r\n    fetchRooms(propertyId);\r\n  };\r\n\r\n  return (\r\n    <main className=\"p-10 max-w-5xl space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Owner Dashboard</h1>\r\n\r\n      {/* TABS */}\r\n      <div className=\"flex gap-4\">\r\n        <button\r\n          className={`px-4 py-2 rounded ${\r\n            tab === \"leads\" ? \"bg-black text-white\" : \"border\"\r\n          }`}\r\n          onClick={() => setTab(\"leads\")}\r\n        >\r\n          Leads\r\n        </button>\r\n        <button\r\n          className={`px-4 py-2 rounded ${\r\n            tab === \"properties\" ? \"bg-black text-white\" : \"border\"\r\n          }`}\r\n          onClick={() => setTab(\"properties\")}\r\n        >\r\n          Properties\r\n        </button>\r\n      </div>\r\n\r\n      {/* OWNER SELECT */}\r\n      <select\r\n        className=\"border p-2 w-full\"\r\n        value={ownerId}\r\n        onChange={(e) => setOwnerId(e.target.value)}\r\n      >\r\n        <option value=\"\">Select Owner</option>\r\n        {owners.map((o) => (\r\n          <option key={o.id} value={o.id}>\r\n            {o.name} — {o.email}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {/* PROPERTIES TAB */}\r\n      {tab === \"properties\" && ownerId && (\r\n        <>\r\n          {/* PROPERTY SELECT */}\r\n          <select\r\n            className=\"border p-2 w-full\"\r\n            value={propertyId}\r\n            onChange={(e) => setPropertyId(e.target.value)}\r\n          >\r\n            <option value=\"\">Select Property</option>\r\n            {properties.map((p) => (\r\n              <option key={p.id} value={p.id}>\r\n                {p.name} ({p.type})\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* ROOMS MANAGEMENT */}\r\n          {propertyId && (\r\n            <div className=\"border rounded p-6 space-y-4\">\r\n              <h2 className=\"font-semibold\">Rooms</h2>\r\n\r\n              {/* ADD ROOM */}\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  className=\"border p-2 flex-1\"\r\n                  placeholder=\"Room name (e.g. 101)\"\r\n                  value={roomName}\r\n                  onChange={(e) => setRoomName(e.target.value)}\r\n                />\r\n                <input\r\n                  className=\"border p-2 w-32\"\r\n                  placeholder=\"Price\"\r\n                  value={roomPrice}\r\n                  onChange={(e) => setRoomPrice(e.target.value)}\r\n                />\r\n                <button\r\n                  onClick={addRoom}\r\n                  className=\"bg-black text-white px-4\"\r\n                >\r\n                  Add\r\n                </button>\r\n              </div>\r\n\r\n              {/* ROOMS LIST */}\r\n              <div className=\"space-y-2\">\r\n                {rooms.map((r) => (\r\n                  <div\r\n                    key={r.id}\r\n                    className=\"border p-3 rounded flex justify-between items-center\"\r\n                  >\r\n                    <div>\r\n                      <div className=\"font-medium\">{r.name}</div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        ₹{r.price}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <button\r\n                      onClick={() => toggleRoom(r.id, r.is_active)}\r\n                      className={`px-3 py-1 rounded ${\r\n                        r.is_active\r\n                          ? \"bg-green-600 text-white\"\r\n                          : \"bg-gray-300\"\r\n                      }`}\r\n                    >\r\n                      {r.is_active ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* LEADS TAB (WILL EXPAND NEXT) */}\r\n      {tab === \"leads\" && (\r\n        <div className=\"border rounded p-6\">\r\n          <p className=\"text-gray-600\">\r\n            Leads view already built. Calendar + booking coming next.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}