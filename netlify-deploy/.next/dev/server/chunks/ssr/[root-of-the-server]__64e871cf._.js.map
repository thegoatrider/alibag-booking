{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { supabase } from \"@/lib/supabase\";\nimport { useEffect, useState } from \"react\";\n\nexport default function EntryGate() {\n  const [loading, setLoading] = useState(true);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [mode, setMode] = useState<\"guest\" | \"admin\">(\"guest\");\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) routeUser(user.id);\n      else setLoading(false);\n    };\n    checkAuth();\n  }, []);\n\n  const routeUser = async (userId: string) => {\n  const { data: profile } = await supabase\n    .from(\"profiles\")\n    .select(\"is_admin, is_owner\")\n    .eq(\"id\", userId)\n    .single();\n  console.log(\"PROFILE CHECK:\", profile);\n  console.log(\"ROUTING PROFILE:\", profile);\n\n  if (profile?.is_admin) {\n    window.location.href = \"/dashboard/admin\";\n  } else if (profile?.is_owner) {\n    window.location.href = \"/dashboard/owner\";\n  } else {\n    window.location.href = \"/dashboard/guest\";\n  }\n};\n\n\n\n  const loginEmail = async () => {\n  if (!email) {\n    alert(\"Enter email\");\n    return;\n  }\n\n  const { error } = await supabase.auth.signInWithOtp({\n  email,\n  options: {\n    emailRedirectTo: `${location.origin}/`,\n  },\n});\n\n\n\n  if (error) {\n    alert(error.message);\n  } else {\n    alert(\"Magic link sent to email\");\n  }\n};\n\n\n  const signupEmail = async () => {\n    const { error } = await supabase.auth.signUp({\n      email,\n      password,\n    });\n    if (!error) alert(\"Account created. Please login.\");\n  };\n\n  const loginGoogle = async () => {\n   await supabase.auth.signInWithOAuth({\n  provider: \"google\",\n  options: {\n    redirectTo: `${location.origin}/`,\n  },\n});\n  };\n\n  if (loading) return <p className=\"p-10\">Loading...</p>;\n\n  return (\n    <main className=\"min-h-screen flex items-center justify-center\">\n      <div className=\"w-96 border rounded-xl p-8 space-y-4\">\n\n        <h1 className=\"text-2xl font-bold text-center\">\n          {mode === \"guest\" ? \"Book stays in Alibag\" : \"Hotel Owner Login\"}\n        </h1>\n\n        <button\n          onClick={loginGoogle}\n          className=\"w-full border p-2 rounded\"\n        >\n          Continue with Google\n        </button>\n\n        <hr />\n\n        <input\n          className=\"border p-2 w-full\"\n          placeholder=\"Email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          className=\"border p-2 w-full\"\n          type=\"password\"\n          placeholder=\"Password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <button\n          className=\"bg-black text-white w-full p-2\"\n          onClick={loginEmail}\n        >\n          Login\n        </button>\n\n        {mode === \"guest\" && (\n          <button\n            className=\"text-sm underline w-full\"\n            onClick={signupEmail}\n          >\n            Create customer account\n          </button>\n        )}\n\n        <div className=\"pt-4 text-center\">\n          {mode === \"guest\" ? (\n            <button\n              className=\"text-sm underline\"\n              onClick={() => setMode(\"admin\")}\n            >\n              Are you a hotel owner?\n            </button>\n          ) : (\n            <button\n              className=\"text-sm underline\"\n              onClick={() => setMode(\"guest\")}\n            >\n              Back to customer login\n            </button>\n          )}\n        </div>\n\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAoB;IAEpD,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,IAAI,MAAM,UAAU,KAAK,EAAE;iBACtB,WAAW;QAClB;QACA;IACF,GAAG,EAAE;IAEL,MAAM,YAAY,OAAO;QACzB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,2HAAQ,CACrC,IAAI,CAAC,YACL,MAAM,CAAC,sBACP,EAAE,CAAC,MAAM,QACT,MAAM;QACT,QAAQ,GAAG,CAAC,kBAAkB;QAC9B,QAAQ,GAAG,CAAC,oBAAoB;QAEhC,IAAI,SAAS,UAAU;YACrB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,OAAO,IAAI,SAAS,UAAU;YAC5B,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,OAAO;YACL,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IAIE,MAAM,aAAa;QACnB,IAAI,CAAC,OAAO;YACV,MAAM;YACN;QACF;QAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;YACpD;YACA,SAAS;gBACP,iBAAiB,GAAG,SAAS,MAAM,CAAC,CAAC,CAAC;YACxC;QACF;QAIE,IAAI,OAAO;YACT,MAAM,MAAM,OAAO;QACrB,OAAO;YACL,MAAM;QACR;IACF;IAGE,MAAM,cAAc;QAClB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3C;YACA;QACF;QACA,IAAI,CAAC,OAAO,MAAM;IACpB;IAEA,MAAM,cAAc;QACnB,MAAM,2HAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;YACrC,UAAU;YACV,SAAS;gBACP,YAAY,GAAG,SAAS,MAAM,CAAC,CAAC,CAAC;YACnC;QACF;IACE;IAEA,IAAI,SAAS,qBAAO,8OAAC;QAAE,WAAU;kBAAO;;;;;;IAExC,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAG,WAAU;8BACX,SAAS,UAAU,yBAAyB;;;;;;8BAG/C,8OAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;8BAID,8OAAC;;;;;8BAED,8OAAC;oBACC,WAAU;oBACV,aAAY;oBACZ,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;8BAE1C,8OAAC;oBACC,WAAU;oBACV,MAAK;oBACL,aAAY;oBACZ,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;8BAG7C,8OAAC;oBACC,WAAU;oBACV,SAAS;8BACV;;;;;;gBAIA,SAAS,yBACR,8OAAC;oBACC,WAAU;oBACV,SAAS;8BACV;;;;;;8BAKH,8OAAC;oBAAI,WAAU;8BACZ,SAAS,wBACR,8OAAC;wBACC,WAAU;wBACV,SAAS,IAAM,QAAQ;kCACxB;;;;;6CAID,8OAAC;wBACC,WAAU;wBACV,SAAS,IAAM,QAAQ;kCACxB;;;;;;;;;;;;;;;;;;;;;;AASb"}}]
}