{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/app/dashboard/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function AdminDashboard() {\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // owner\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  // areas\r\n  const [areas, setAreas] = useState<any[]>([]);\r\n  const [areaName, setAreaName] = useState(\"\");\r\n\r\n  // owners + property\r\n  const [owners, setOwners] = useState<any[]>([]);\r\n  const [propertyName, setPropertyName] = useState(\"\");\r\n  const [propertyType, setPropertyType] = useState<\"hotel\" | \"villa\">(\"hotel\");\r\n  const [selectedOwner, setSelectedOwner] = useState(\"\");\r\n  const [selectedArea, setSelectedArea] = useState(\"\");\r\n  const [startingPrice, setStartingPrice] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  const init = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) {\r\n      window.location.href = \"/\";\r\n      return;\r\n    }\r\n\r\n    const { data: profile } = await supabase\r\n      .from(\"profiles\")\r\n      .select(\"is_admin\")\r\n      .eq(\"id\", user.id)\r\n      .single();\r\n\r\n    if (!profile?.is_admin) {\r\n      alert(\"Unauthorized\");\r\n      window.location.href = \"/\";\r\n      return;\r\n    }\r\n\r\n    fetchAreas();\r\n    fetchOwners();\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchAreas = async () => {\r\n    const { data } = await supabase.from(\"areas\").select(\"*\");\r\n    setAreas(data || []);\r\n  };\r\n\r\n  const fetchOwners = async () => {\r\n    const { data } = await supabase\r\n      .from(\"profiles\")\r\n      .select(\"id\")\r\n      .eq(\"is_owner\", true);\r\n\r\n    setOwners(data || []);\r\n  };\r\n\r\n  const createArea = async () => {\r\n    if (!areaName) return alert(\"Enter area name\");\r\n    await supabase.from(\"areas\").insert({ name: areaName });\r\n    setAreaName(\"\");\r\n    fetchAreas();\r\n  };\r\n\r\n  const createOwner = async () => {\r\n    if (!email) return alert(\"Enter email\");\r\n\r\n    const res = await fetch(\"/api/admin/create-owner\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) return alert(data.error);\r\n\r\n    alert(\"Owner created\");\r\n    setEmail(\"\");\r\n    fetchOwners();\r\n  };\r\n\r\n  const createProperty = async () => {\r\n    if (!propertyName || !selectedOwner || !selectedArea || !startingPrice) {\r\n      alert(\"Fill all fields\");\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      name: propertyName,\r\n      owner_id: selectedOwner,\r\n      area_id: selectedArea,\r\n      starting_price: Number(startingPrice),\r\n    };\r\n\r\n    if (propertyType === \"hotel\") {\r\n      await supabase.from(\"hotels\").insert(payload);\r\n    } else {\r\n      await supabase.from(\"villas\").insert(payload);\r\n    }\r\n\r\n    alert(\"Property created\");\r\n    setPropertyName(\"\");\r\n    setStartingPrice(\"\");\r\n  };\r\n\r\n  if (loading) return <p className=\"p-10\">Loading admin panel...</p>;\r\n\r\n  return (\r\n    <main className=\"p-10 max-w-xl space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Admin Dashboard</h1>\r\n\r\n      {/* CREATE OWNER */}\r\n      <div className=\"border rounded-xl p-6 space-y-4\">\r\n        <h2 className=\"font-semibold\">Create Hotel Owner</h2>\r\n        <input\r\n          className=\"border p-2 w-full\"\r\n          placeholder=\"Owner email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <button\r\n          onClick={createOwner}\r\n          className=\"bg-black text-white px-4 py-2 rounded\"\r\n        >\r\n          Create Owner\r\n        </button>\r\n      </div>\r\n\r\n      {/* CREATE AREA */}\r\n      <div className=\"border rounded-xl p-6 space-y-4\">\r\n        <h2 className=\"font-semibold\">Create Area</h2>\r\n        <input\r\n          className=\"border p-2 w-full\"\r\n          placeholder=\"Area name (e.g. Akshi)\"\r\n          value={areaName}\r\n          onChange={(e) => setAreaName(e.target.value)}\r\n        />\r\n        <button\r\n          onClick={createArea}\r\n          className=\"bg-black text-white px-4 py-2 rounded\"\r\n        >\r\n          Add Area\r\n        </button>\r\n        <div className=\"text-sm text-gray-600\">\r\n          Existing areas: {areas.map((a) => a.name).join(\", \")}\r\n        </div>\r\n      </div>\r\n\r\n      {/* CREATE PROPERTY */}\r\n      <div className=\"border rounded-xl p-6 space-y-4\">\r\n        <h2 className=\"font-semibold\">Create Hotel / Villa</h2>\r\n\r\n        <input\r\n          className=\"border p-2 w-full\"\r\n          placeholder=\"Property name\"\r\n          value={propertyName}\r\n          onChange={(e) => setPropertyName(e.target.value)}\r\n        />\r\n\r\n        <select\r\n          className=\"border p-2 w-full\"\r\n          value={propertyType}\r\n          onChange={(e) => setPropertyType(e.target.value as any)}\r\n        >\r\n          <option value=\"hotel\">Hotel</option>\r\n          <option value=\"villa\">Villa</option>\r\n        </select>\r\n\r\n        <select\r\n          className=\"border p-2 w-full\"\r\n          value={selectedArea}\r\n          onChange={(e) => setSelectedArea(e.target.value)}\r\n        >\r\n          <option value=\"\">Select Area</option>\r\n          {areas.map((a) => (\r\n            <option key={a.id} value={a.id}>{a.name}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <select\r\n          className=\"border p-2 w-full\"\r\n          value={selectedOwner}\r\n          onChange={(e) => setSelectedOwner(e.target.value)}\r\n        >\r\n          <option value=\"\">Assign Owner</option>\r\n          {owners.map((o) => (\r\n            <option key={o.id} value={o.id}>{o.id}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <input\r\n          className=\"border p-2 w-full\"\r\n          placeholder=\"Starting price\"\r\n          value={startingPrice}\r\n          onChange={(e) => setStartingPrice(e.target.value)}\r\n        />\r\n\r\n        <button\r\n          onClick={createProperty}\r\n          className=\"bg-black text-white px-4 py-2 rounded\"\r\n        >\r\n          Create Property\r\n        </button>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}