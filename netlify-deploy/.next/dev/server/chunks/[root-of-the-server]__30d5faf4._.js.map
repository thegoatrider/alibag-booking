{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/app/api/admin/create-owner/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseAdmin = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);\r\n\r\nexport async function POST(req: Request) {\r\n  const { email } = await req.json();\r\n  if (!email) {\r\n    return NextResponse.json({ error: \"Email required\" }, { status: 400 });\r\n  }\r\n\r\n  const { data, error } = await supabaseAdmin.auth.admin.createUser({\r\n    email,\r\n    email_confirm: true,\r\n  });\r\n\r\n  if (error) {\r\n    return NextResponse.json({ error: error.message }, { status: 400 });\r\n  }\r\n\r\n  await supabaseAdmin\r\n    .from(\"profiles\")\r\n    .update({ is_owner: true, email })\r\n    .eq(\"id\", data.user.id);\r\n\r\n  return NextResponse.json({ success: true });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,gBAAgB,IAAA,gMAAY,gFAEhC,QAAQ,GAAG,CAAC,yBAAyB;AAGhC,eAAe,KAAK,GAAY;IACrC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;IAChC,IAAI,CAAC,OAAO;QACV,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;QAChE;QACA,eAAe;IACjB;IAEA,IAAI,OAAO;QACT,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;IAEA,MAAM,cACH,IAAI,CAAC,YACL,MAAM,CAAC;QAAE,UAAU;QAAM;IAAM,GAC/B,EAAE,CAAC,MAAM,KAAK,IAAI,CAAC,EAAE;IAExB,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC3C"}}]
}