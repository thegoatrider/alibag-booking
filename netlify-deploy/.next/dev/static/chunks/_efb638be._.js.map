{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["C:/Users/goatr/alibag-booking/app/p/[slug]/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useSearchParams } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function PropertyPage() {\r\n  const { slug } = useParams();\r\n  const search = useSearchParams();\r\n  const searchParams = useSearchParams();\r\n\r\n  const checkIn = search.get(\"check_in\");\r\n  const checkOut = search.get(\"check_out\");\r\n  const leadId = search.get(\"lead\");\r\n\r\n  const [property, setProperty] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n  if (!leadId) return;\r\n\r\n  const markViewed = async () => {\r\n    // Fetch current status\r\n    const { data: lead } = await supabase\r\n      .from(\"leads\")\r\n      .select(\"status\")\r\n      .eq(\"id\", leadId)\r\n      .single();\r\n\r\n    // Only update if still enquired\r\n    if (lead?.status === \"enquired\") {\r\n      await supabase\r\n        .from(\"leads\")\r\n        .update({ status: \"viewed\" })\r\n        .eq(\"id\", leadId);\r\n    }\r\n  };\r\n\r\n  markViewed();\r\n}, [leadId]);\r\n\r\n\r\n  const fetchProperty = async () => {\r\n    const { data } = await supabase\r\n      .from(\"properties\")\r\n      .select(\"*, areas(name)\")\r\n      .eq(\"slug\", slug)\r\n      .single();\r\n\r\n    setProperty(data);\r\n  };\r\n\r\n  const markViewed = async () => {\r\n    if (!leadId) return;\r\n\r\n    await supabase\r\n      .from(\"leads\")\r\n      .update({ status: \"viewed\" })\r\n      .eq(\"id\", leadId);\r\n  };\r\n\r\n  const markShortlisted = async () => {\r\n    if (!leadId) return;\r\n\r\n    await supabase\r\n      .from(\"leads\")\r\n      .update({ status: \"shortlisted\" })\r\n      .eq(\"id\", leadId);\r\n  };\r\n\r\n  if (!property) return <p className=\"p-10\">Loading property...</p>;\r\n\r\n  return (\r\n    <main className=\"p-6 max-w-3xl space-y-4\">\r\n      <h1 className=\"text-2xl font-bold\">{property.name}</h1>\r\n\r\n      <div className=\"text-gray-600\">\r\n        Area: {property.areas?.name}\r\n      </div>\r\n\r\n      <div className=\"text-lg font-semibold\">\r\n        Starting ₹{property.starting_price} / night\r\n      </div>\r\n\r\n      <div className=\"border p-4 rounded space-y-2\">\r\n        <div>\r\n          <b>Check-in:</b> {checkIn || \"—\"}\r\n        </div>\r\n        <div>\r\n          <b>Check-out:</b> {checkOut || \"—\"}\r\n        </div>\r\n      </div>\r\n\r\n      {/* BOOK NOW */}\r\n      <button\r\n        onClick={markShortlisted}\r\n        className=\"bg-black text-white px-4 py-2 rounded w-full\"\r\n      >\r\n        Book Now\r\n      </button>\r\n\r\n      {/* WHATSAPP */}\r\n      <button\r\n        onClick={() => {\r\n          markShortlisted();\r\n          window.open(\r\n            `https://wa.me/91${property.phone || \"\"}`,\r\n            \"_blank\"\r\n          );\r\n        }}\r\n        className=\"border px-4 py-2 rounded w-full\"\r\n      >\r\n        Chat with Owner\r\n      </button>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["c","_c","useEffect","useState","useParams","useSearchParams","supabase","PropertyPage","$","$i","Symbol","for","search","t0","get","checkIn","t1","checkOut","t2","leadId","property","t3","t4","PropertyPage[useEffect()]","markViewed","PropertyPage[useEffect() > markViewed]","data","lead","from","select","eq","single","status","update","t5","PropertyPage[markShortlisted]","markShortlisted","t6","name","t7","areas","t8","t9","starting_price","t10","t11","t12","t13","t14","t15","t16","t17","t18","phone","PropertyPage[<button>.onClick]","window","open","t19"],"mappings":"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","ignoreList":[]}}]
}