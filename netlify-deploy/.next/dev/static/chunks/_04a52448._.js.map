{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["C:/Users/goatr/alibag-booking/app/dashboard/owner/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function OwnerDashboard() {\r\n  const [tab, setTab] = useState<\"leads\" | \"properties\">(\"leads\");\r\n\r\n  const [owners, setOwners] = useState<any[]>([]);\r\n  const [ownerId, setOwnerId] = useState(\"\");\r\n\r\n  const [properties, setProperties] = useState<any[]>([]);\r\n  const [propertyId, setPropertyId] = useState(\"\");\r\n\r\n  // ROOMS\r\n  const [rooms, setRooms] = useState<any[]>([]);\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomPrice, setRoomPrice] = useState(\"\");\r\n\r\n  // LEADS (kept for later steps)\r\n  const [leads, setLeads] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetchOwners();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (ownerId) fetchProperties(ownerId);\r\n  }, [ownerId]);\r\n\r\n  useEffect(() => {\r\n    if (propertyId) fetchRooms(propertyId);\r\n  }, [propertyId]);\r\n\r\n  const fetchOwners = async () => {\r\n    const { data } = await supabase.from(\"owners\").select(\"*\");\r\n    setOwners(data || []);\r\n  };\r\n\r\n  const fetchProperties = async (oid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"properties\")\r\n      .select(\"*\")\r\n      .eq(\"owner_id\", oid);\r\n\r\n    setProperties(data || []);\r\n    setPropertyId(\"\");\r\n    setRooms([]);\r\n  };\r\n\r\n  const fetchRooms = async (pid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"rooms\")\r\n      .select(\"*\")\r\n      .eq(\"property_id\", pid)\r\n      .order(\"created_at\");\r\n\r\n    setRooms(data || []);\r\n  };\r\n\r\n  const addRoom = async () => {\r\n    if (!roomName || !roomPrice || !propertyId)\r\n      return alert(\"Fill all fields\");\r\n\r\n    const { data, error } = await supabase.from(\"rooms\").insert({\r\n  property_id: propertyId,\r\n  name: roomName,\r\n  price: Number(roomPrice),\r\n});\r\n\r\nconsole.log(\"ROOM INSERT ERROR FULL:\", JSON.stringify(error, null, 2));\r\n\r\n\r\n    setRoomName(\"\");\r\n    setRoomPrice(\"\");\r\n    fetchRooms(propertyId);\r\n  };\r\n\r\n  const toggleRoom = async (roomId: string, isActive: boolean) => {\r\n    await supabase\r\n      .from(\"rooms\")\r\n      .update({ is_active: !isActive })\r\n      .eq(\"id\", roomId);\r\n\r\n    fetchRooms(propertyId);\r\n  };\r\n\r\n  return (\r\n    <main className=\"p-10 max-w-5xl space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Owner Dashboard</h1>\r\n\r\n      {/* TABS */}\r\n      <div className=\"flex gap-4\">\r\n        <button\r\n          className={`px-4 py-2 rounded ${\r\n            tab === \"leads\" ? \"bg-black text-white\" : \"border\"\r\n          }`}\r\n          onClick={() => setTab(\"leads\")}\r\n        >\r\n          Leads\r\n        </button>\r\n        <button\r\n          className={`px-4 py-2 rounded ${\r\n            tab === \"properties\" ? \"bg-black text-white\" : \"border\"\r\n          }`}\r\n          onClick={() => setTab(\"properties\")}\r\n        >\r\n          Properties\r\n        </button>\r\n      </div>\r\n\r\n      {/* OWNER SELECT */}\r\n      <select\r\n        className=\"border p-2 w-full\"\r\n        value={ownerId}\r\n        onChange={(e) => setOwnerId(e.target.value)}\r\n      >\r\n        <option value=\"\">Select Owner</option>\r\n        {owners.map((o) => (\r\n          <option key={o.id} value={o.id}>\r\n            {o.name} — {o.email}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {/* PROPERTIES TAB */}\r\n      {tab === \"properties\" && ownerId && (\r\n        <>\r\n          {/* PROPERTY SELECT */}\r\n          <select\r\n            className=\"border p-2 w-full\"\r\n            value={propertyId}\r\n            onChange={(e) => setPropertyId(e.target.value)}\r\n          >\r\n            <option value=\"\">Select Property</option>\r\n            {properties.map((p) => (\r\n              <option key={p.id} value={p.id}>\r\n                {p.name} ({p.type})\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* ROOMS MANAGEMENT */}\r\n          {propertyId && (\r\n            <div className=\"border rounded p-6 space-y-4\">\r\n              <h2 className=\"font-semibold\">Rooms</h2>\r\n\r\n              {/* ADD ROOM */}\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  className=\"border p-2 flex-1\"\r\n                  placeholder=\"Room name (e.g. 101)\"\r\n                  value={roomName}\r\n                  onChange={(e) => setRoomName(e.target.value)}\r\n                />\r\n                <input\r\n                  className=\"border p-2 w-32\"\r\n                  placeholder=\"Price\"\r\n                  value={roomPrice}\r\n                  onChange={(e) => setRoomPrice(e.target.value)}\r\n                />\r\n                <button\r\n                  onClick={addRoom}\r\n                  className=\"bg-black text-white px-4\"\r\n                >\r\n                  Add\r\n                </button>\r\n              </div>\r\n\r\n              {/* ROOMS LIST */}\r\n              <div className=\"space-y-2\">\r\n                {rooms.map((r) => (\r\n                  <div\r\n                    key={r.id}\r\n                    className=\"border p-3 rounded flex justify-between items-center\"\r\n                  >\r\n                    <div>\r\n                      <div className=\"font-medium\">{r.name}</div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        ₹{r.price}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <button\r\n                      onClick={() => toggleRoom(r.id, r.is_active)}\r\n                      className={`px-3 py-1 rounded ${\r\n                        r.is_active\r\n                          ? \"bg-green-600 text-white\"\r\n                          : \"bg-gray-300\"\r\n                      }`}\r\n                    >\r\n                      {r.is_active ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* LEADS TAB (WILL EXPAND NEXT) */}\r\n      {tab === \"leads\" && (\r\n        <div className=\"border rounded p-6\">\r\n          <p className=\"text-gray-600\">\r\n            Leads view already built. Calendar + booking coming next.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","supabase","OwnerDashboard","tab","setTab","owners","setOwners","ownerId","setOwnerId","properties","setProperties","propertyId","setPropertyId","rooms","setRooms","roomName","setRoomName","roomPrice","setRoomPrice","leads","setLeads","fetchOwners","fetchProperties","fetchRooms","data","from","select","oid","eq","pid","order","addRoom","alert","error","insert","property_id","name","price","Number","console","log","JSON","stringify","toggleRoom","roomId","isActive","update","is_active","e","target","value","map","o","id","email","p","type","r"],"mappings":"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","ignoreList":[]}}]
}