{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/goatr/alibag-booking/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["C:/Users/goatr/alibag-booking/app/dashboard/owner/PropertyCalendar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function PropertyCalendar({ propertyId }: { propertyId: string }) {\r\n  const [month, setMonth] = useState(new Date());\r\n  const [days, setDays] = useState<any[]>([]);\r\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\r\n  const [rooms, setRooms] = useState<any[]>([]);\r\n  const [blockedRooms, setBlockedRooms] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (propertyId) buildCalendar();\r\n  }, [propertyId, month]);\r\n\r\n  const buildCalendar = async () => {\r\n    const start = new Date(month.getFullYear(), month.getMonth(), 1);\r\n    const end = new Date(month.getFullYear(), month.getMonth() + 1, 0);\r\n\r\n    const result: any[] = [];\r\n\r\n    for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\r\n      const iso = d.toISOString().split(\"T\")[0];\r\n\r\n      // CONFIRMED BOOKINGS\r\n      const { data: bookings } = await supabase\r\n        .from(\"bookings\")\r\n        .select(\"id\")\r\n        .eq(\"property_id\", propertyId)\r\n        .eq(\"status\", \"confirmed\")\r\n        .lte(\"check_in\", iso)\r\n        .gt(\"check_out\", iso);\r\n\r\n      const bookingIds = (bookings || []).map((b) => b.id);\r\n\r\n      let bookedCount = 0;\r\n      if (bookingIds.length > 0) {\r\n        const { count } = await supabase\r\n          .from(\"booking_rooms\")\r\n          .select(\"id\", { count: \"exact\", head: true })\r\n          .in(\"booking_id\", bookingIds);\r\n\r\n        bookedCount = count || 0;\r\n      }\r\n\r\n      // BLOCKED ROOMS\r\n      const { count: blockedCount } = await supabase\r\n        .from(\"room_blocks\")\r\n        .select(\"id\", { count: \"exact\", head: true })\r\n        .eq(\"date\", iso);\r\n\r\n      result.push({\r\n        date: iso,\r\n        booked: bookedCount,\r\n        blocked: blockedCount || 0,\r\n      });\r\n    }\r\n\r\n    setDays(result);\r\n  };\r\n\r\n  const openDate = async (date: string) => {\r\n    setSelectedDate(date);\r\n\r\n    const { data: roomData } = await supabase\r\n      .from(\"rooms\")\r\n      .select(\"*\")\r\n      .eq(\"property_id\", propertyId)\r\n      .eq(\"is_active\", true);\r\n\r\n    const { data: blocked } = await supabase\r\n      .from(\"room_blocks\")\r\n      .select(\"room_id\")\r\n      .eq(\"date\", date);\r\n\r\n    setRooms(roomData || []);\r\n    setBlockedRooms((blocked || []).map((b) => b.room_id));\r\n  };\r\n\r\n  const blockRoom = async (roomId: string) => {\r\n    if (!selectedDate) return;\r\n\r\n    await supabase.from(\"room_blocks\").insert({\r\n      room_id: roomId,\r\n      date: selectedDate,\r\n    });\r\n\r\n    openDate(selectedDate);\r\n    buildCalendar();\r\n  };\r\n\r\n  const blockAllRooms = async () => {\r\n  if (!selectedDate) return;\r\n\r\n  // 1. Get active rooms\r\n  const { data: activeRooms } = await supabase\r\n    .from(\"rooms\")\r\n    .select(\"id\")\r\n    .eq(\"property_id\", propertyId)\r\n    .eq(\"is_active\", true);\r\n\r\n  if (!activeRooms || activeRooms.length === 0) return;\r\n\r\n  // 2. Get already blocked rooms for that date\r\n  const { data: alreadyBlocked } = await supabase\r\n    .from(\"room_blocks\")\r\n    .select(\"room_id\")\r\n    .eq(\"date\", selectedDate);\r\n\r\n  const blockedSet = new Set(\r\n    (alreadyBlocked || []).map((b) => b.room_id)\r\n  );\r\n\r\n  // 3. Insert only unblocked rooms\r\n  const toInsert = activeRooms\r\n    .filter((r) => !blockedSet.has(r.id))\r\n    .map((r) => ({\r\n      room_id: r.id,\r\n      date: selectedDate,\r\n    }));\r\n\r\n  if (toInsert.length > 0) {\r\n    await supabase.from(\"room_blocks\").insert(toInsert);\r\n  }\r\n\r\n  openDate(selectedDate);\r\n  buildCalendar();\r\n};\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <button\r\n          onClick={() =>\r\n            setMonth(new Date(month.getFullYear(), month.getMonth() - 1))\r\n          }\r\n        >\r\n          ‚Üê\r\n        </button>\r\n\r\n        <h2 className=\"font-semibold\">\r\n          {month.toLocaleString(\"default\", { month: \"long\" })}{\" \"}\r\n          {month.getFullYear()}\r\n        </h2>\r\n\r\n        <button\r\n          onClick={() =>\r\n            setMonth(new Date(month.getFullYear(), month.getMonth() + 1))\r\n          }\r\n        >\r\n          ‚Üí\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-7 gap-2\">\r\n        {days.map((d) => (\r\n          <div\r\n            key={d.date}\r\n            onClick={() => openDate(d.date)}\r\n            className=\"border rounded p-2 cursor-pointer hover:bg-gray-50\"\r\n          >\r\n            <div className=\"font-medium\">\r\n              {new Date(d.date).getDate()}\r\n            </div>\r\n\r\n            <div className=\"text-xs text-gray-700\">\r\n              {d.booked} booked\r\n            </div>\r\n\r\n            <div className=\"text-xs text-red-700\">\r\n  {d.blocked} blocked\r\n</div>\r\n\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {selectedDate && (\r\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white text-black rounded-lg p-6 w-full max-w-lg space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">{selectedDate}</h3>\r\n\r\n            <button\r\n              onClick={blockAllRooms}\r\n              className=\"bg-black text-white px-4 py-2 rounded\"\r\n            >\r\n              Block Entire Property\r\n            </button>\r\n\r\n            <div className=\"space-y-2\">\r\n              {rooms.map((r) => (\r\n                <div\r\n                  key={r.id}\r\n                  className=\"flex justify-between items-center border p-2 rounded\"\r\n                >\r\n                  <div>\r\n                    {r.name} ‚Äì ‚Çπ{r.price}\r\n                  </div>\r\n\r\n                  {blockedRooms.includes(r.id) ? (\r\n                    <span className=\"text-red-600 text-sm\">\r\n                      Blocked\r\n                    </span>\r\n                  ) : (\r\n                    <button\r\n                      onClick={() => blockRoom(r.id)}\r\n                      className=\"text-sm underline\"\r\n                    >\r\n                      Block\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <button\r\n              onClick={() => setSelectedDate(null)}\r\n              className=\"text-sm underline w-full text-center\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","supabase","PropertyCalendar","propertyId","month","setMonth","Date","days","setDays","selectedDate","setSelectedDate","rooms","setRooms","blockedRooms","setBlockedRooms","buildCalendar","start","getFullYear","getMonth","end","result","d","setDate","getDate","iso","toISOString","split","data","bookings","from","select","eq","lte","gt","bookingIds","map","b","id","bookedCount","length","count","head","in","blockedCount","push","date","booked","blocked","openDate","roomData","room_id","blockRoom","roomId","insert","blockAllRooms","activeRooms","alreadyBlocked","blockedSet","Set","toInsert","filter","r","has","toLocaleString","name","price","includes"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["C:/Users/goatr/alibag-booking/app/dashboard/owner/LeadFunnelMetrics.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\ntype LeadStatus =\r\n  | \"enquired\"\r\n  | \"viewed\"\r\n  | \"shortlisted\"\r\n  | \"booked\"\r\n  | \"dropped\";\r\n\r\ntype FunnelStats = Record<LeadStatus, number> & {\r\n  total: number;\r\n};\r\n\r\nexport default function LeadFunnelMetrics({ ownerId }: { ownerId: string }) {\r\n  const [stats, setStats] = useState<FunnelStats>({\r\n    total: 0,\r\n    enquired: 0,\r\n    viewed: 0,\r\n    shortlisted: 0,\r\n    booked: 0,\r\n    dropped: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (ownerId) fetchStats();\r\n  }, [ownerId]);\r\n\r\n  const fetchStats = async () => {\r\n    const { data } = await supabase\r\n      .from(\"leads\")\r\n      .select(\"status\")\r\n      .eq(\"owner_id\", ownerId);\r\n\r\n    const counts: FunnelStats = {\r\n      total: data?.length || 0,\r\n      enquired: 0,\r\n      viewed: 0,\r\n      shortlisted: 0,\r\n      booked: 0,\r\n      dropped: 0,\r\n    };\r\n\r\n    data?.forEach((l) => {\r\n      const status = l.status as LeadStatus;\r\n      if (counts[status] !== undefined) {\r\n        counts[status]++;\r\n      }\r\n    });\r\n\r\n    setStats(counts);\r\n  };\r\n\r\n  const conversion =\r\n    stats.enquired > 0\r\n      ? Math.round((stats.booked / stats.enquired) * 100)\r\n      : 0;\r\n\r\n  const Card = ({\r\n    label,\r\n    value,\r\n    color,\r\n  }: {\r\n    label: string;\r\n    value: number;\r\n    color: string;\r\n  }) => (\r\n    <div className=\"bg-neutral-900 border border-neutral-700 rounded p-4\">\r\n      <div className=\"text-sm text-gray-400\">{label}</div>\r\n      <div className={`text-2xl font-bold ${color}`}>{value}</div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <h2 className=\"text-lg font-semibold\">Lead Funnel</h2>\r\n\r\n      <div className=\"grid grid-cols-2 md:grid-cols-6 gap-4\">\r\n        <Card label=\"Enquired\" value={stats.enquired} color=\"text-blue-400\" />\r\n        <Card label=\"Viewed\" value={stats.viewed} color=\"text-yellow-400\" />\r\n        <Card\r\n          label=\"Shortlisted\"\r\n          value={stats.shortlisted}\r\n          color=\"text-purple-400\"\r\n        />\r\n        <Card label=\"Booked\" value={stats.booked} color=\"text-green-400\" />\r\n        <Card label=\"Dropped\" value={stats.dropped} color=\"text-red-400\" />\r\n        <Card\r\n          label=\"Conversion %\"\r\n          value={conversion}\r\n          color=\"text-indigo-400\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","supabase","LeadStatus","FunnelStats","Record","total","LeadFunnelMetrics","ownerId","stats","setStats","enquired","viewed","shortlisted","booked","dropped","fetchStats","data","from","select","eq","counts","length","forEach","l","status","undefined","conversion","Math","round","Card","label","value","color"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["C:/Users/goatr/alibag-booking/app/dashboard/owner/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport PropertyCalendar from \"./PropertyCalendar\";\r\nimport LeadFunnelMetrics from \"./LeadFunnelMetrics\";\r\n\r\nexport default function OwnerDashboard() {\r\n  const [tab, setTab] = useState<\"leads\" | \"properties\">(\"leads\");\r\n\r\n  const [owners, setOwners] = useState<any[]>([]);\r\n  const [ownerId, setOwnerId] = useState(\"\");\r\n\r\n  const [properties, setProperties] = useState<any[]>([]);\r\n  const [propertyId, setPropertyId] = useState(\"\");\r\n\r\n  // LEADS\r\n  const [leads, setLeads] = useState<any[]>([]);\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [checkIn, setCheckIn] = useState(\"\");\r\n  const [checkOut, setCheckOut] = useState(\"\");\r\n\r\n  // ROOMS\r\n  const [rooms, setRooms] = useState<any[]>([]);\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomPrice, setRoomPrice] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchOwners();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (ownerId) {\r\n      fetchProperties(ownerId);\r\n      fetchLeads(ownerId);\r\n    }\r\n  }, [ownerId]);\r\n\r\n  useEffect(() => {\r\n    if (propertyId) fetchRooms(propertyId);\r\n  }, [propertyId]);\r\n\r\n  /* ---------- DATA ---------- */\r\n\r\n  const fetchOwners = async () => {\r\n    const { data } = await supabase.from(\"owners\").select(\"*\");\r\n    setOwners(data || []);\r\n  };\r\n\r\n  const fetchProperties = async (oid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"properties\")\r\n      .select(\"*\")\r\n      .eq(\"owner_id\", oid);\r\n\r\n    setProperties(data || []);\r\n    setPropertyId(\"\");\r\n  };\r\n\r\n  const fetchLeads = async (oid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"leads\")\r\n      .select(\"*\")\r\n      .eq(\"owner_id\", oid)\r\n      .order(\"created_at\", { ascending: false });\r\n\r\n    setLeads(data || []);\r\n  };\r\n\r\n  const fetchRooms = async (pid: string) => {\r\n    const { data } = await supabase\r\n      .from(\"rooms\")\r\n      .select(\"*\")\r\n      .eq(\"property_id\", pid)\r\n      .order(\"created_at\");\r\n\r\n    setRooms(data || []);\r\n  };\r\n\r\n  /* ---------- ACTIONS ---------- */\r\n\r\n  const sendLead = async () => {\r\n    if (!phone || !checkIn || !checkOut || !propertyId) {\r\n      alert(\"Fill all fields\");\r\n      return;\r\n    }\r\n\r\n    const { data: lead, error } = await supabase\r\n      .from(\"leads\")\r\n      .insert({\r\n        owner_id: ownerId,\r\n        property_id: propertyId,\r\n        phone,\r\n        check_in: checkIn,\r\n        check_out: checkOut,\r\n        status: \"enquired\",\r\n        source: \"owner\",\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (error || !lead) {\r\n      alert(\"Lead insert failed\");\r\n      return;\r\n    }\r\n\r\n    const property = properties.find((p) => p.id === propertyId);\r\n    if (!property) return;\r\n\r\n    const link = `${window.location.origin}/p/${property.slug}?ci=${checkIn}&co=${checkOut}&lead=${lead.id}`;\r\n\r\n    const msg = `Thank you for contacting ${property.name} üå¥\r\n\r\nDates: ${checkIn} to ${checkOut}\r\n\r\nView availability & book:\r\n${link}`;\r\n\r\n    window.open(\r\n      `https://wa.me/91${phone}?text=${encodeURIComponent(msg)}`,\r\n      \"_blank\"\r\n    );\r\n\r\n    setPhone(\"\");\r\n    setCheckIn(\"\");\r\n    setCheckOut(\"\");\r\n    setPropertyId(\"\");\r\n\r\n    fetchLeads(ownerId);\r\n  };\r\n\r\n  const addRoom = async () => {\r\n    if (!roomName || !roomPrice || !propertyId) return;\r\n\r\n    await supabase.from(\"rooms\").insert({\r\n      property_id: propertyId,\r\n      name: roomName,\r\n      price: Number(roomPrice),\r\n      is_active: true,\r\n    });\r\n\r\n    setRoomName(\"\");\r\n    setRoomPrice(\"\");\r\n    fetchRooms(propertyId);\r\n  };\r\n\r\n  const toggleRoom = async (id: string, isActive: boolean) => {\r\n    await supabase\r\n      .from(\"rooms\")\r\n      .update({ is_active: !isActive })\r\n      .eq(\"id\", id);\r\n\r\n    fetchRooms(propertyId);\r\n  };\r\n\r\n  const statusColor = (status: string) =>\r\n    ({\r\n      enquired: \"bg-blue-600\",\r\n      viewed: \"bg-yellow-500 text-black\",\r\n      shortlisted: \"bg-purple-600\",\r\n      booked: \"bg-green-600\",\r\n      dropped: \"bg-red-600\",\r\n    }[status] || \"bg-gray-600\");\r\n\r\n  /* ---------- UI ---------- */\r\n\r\n  return (\r\n    <main className=\"p-10 max-w-6xl space-y-6 bg-black min-h-screen text-white\">\r\n      <h1 className=\"text-2xl font-bold\">Owner Dashboard</h1>\r\n\r\n      {/* TABS */}\r\n      <div className=\"flex gap-4\">\r\n        {[\"leads\", \"properties\"].map((t) => (\r\n          <button\r\n            key={t}\r\n            onClick={() => setTab(t as any)}\r\n            className={`px-4 py-2 rounded ${\r\n              tab === t\r\n                ? \"bg-indigo-600 text-white\"\r\n                : \"bg-neutral-800 border border-neutral-700 text-gray-300\"\r\n            }`}\r\n          >\r\n            {t.charAt(0).toUpperCase() + t.slice(1)}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* OWNER SELECT */}\r\n      <select\r\n        className=\"bg-neutral-800 border border-neutral-600 p-2 w-full text-white\"\r\n        value={ownerId}\r\n        onChange={(e) => setOwnerId(e.target.value)}\r\n      >\r\n        <option value=\"\">Select Owner</option>\r\n        {owners.map((o) => (\r\n          <option key={o.id} value={o.id}>\r\n            {o.email}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {/* ================= LEADS ================= */}\r\n      {tab === \"leads\" && ownerId && (\r\n        \r\n        <div className=\"space-y-6\">\r\n          <LeadFunnelMetrics ownerId={ownerId} />\r\n\r\n          {/* NEW ENQUIRY */}\r\n          <div className=\"bg-neutral-900 border border-neutral-700 rounded p-6 space-y-3\">\r\n            <h2 className=\"font-semibold text-lg border-b border-neutral-700 pb-2\">\r\n              New Enquiry\r\n            </h2>\r\n\r\n            <select\r\n              className=\"bg-neutral-800 border border-neutral-600 p-2 w-full\"\r\n              value={propertyId}\r\n              onChange={(e) => setPropertyId(e.target.value)}\r\n            >\r\n              <option value=\"\">Select Property</option>\r\n              {properties.map((p) => (\r\n                <option key={p.id} value={p.id}>\r\n                  {p.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n\r\n            <input\r\n              className=\"bg-neutral-800 border border-neutral-600 p-2 w-full\"\r\n              placeholder=\"Phone\"\r\n              value={phone}\r\n              onChange={(e) => setPhone(e.target.value)}\r\n            />\r\n\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                type=\"date\"\r\n                className=\"bg-neutral-800 border border-neutral-600 p-2 flex-1\"\r\n                value={checkIn}\r\n                onChange={(e) => setCheckIn(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"date\"\r\n                className=\"bg-neutral-800 border border-neutral-600 p-2 flex-1\"\r\n                value={checkOut}\r\n                onChange={(e) => setCheckOut(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              onClick={sendLead}\r\n              className=\"bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded\"\r\n            >\r\n              Send Property Link\r\n            </button>\r\n          </div>\r\n\r\n          {/* LEADS TABLE */}\r\n          <div className=\"bg-neutral-900 border border-neutral-700 rounded p-4\">\r\n            <table className=\"w-full text-left\">\r\n              <thead className=\"text-gray-400\">\r\n                <tr className=\"border-b border-neutral-700\">\r\n                  <th className=\"py-2\">Phone</th>\r\n                  <th>Status</th>\r\n                  <th>Dates</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {leads.map((l) => (\r\n                  <tr key={l.id} className=\"border-b border-neutral-800\">\r\n                    <td className=\"py-2\">{l.phone}</td>\r\n                    <td>\r\n                      <span\r\n                        className={`px-3 py-1 rounded text-xs ${statusColor(\r\n                          l.status\r\n                        )}`}\r\n                      >\r\n                        {l.status}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      {l.check_in} ‚Üí {l.check_out}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {leads.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={3} className=\"py-4 text-gray-500\">\r\n                      No leads yet\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ================= PROPERTIES ================= */}\r\n      {tab === \"properties\" && ownerId && (\r\n        <div className=\"space-y-6\">\r\n          <select\r\n            className=\"bg-neutral-800 border border-neutral-600 p-2 w-full\"\r\n            value={propertyId}\r\n            onChange={(e) => setPropertyId(e.target.value)}\r\n          >\r\n            <option value=\"\">Select Property</option>\r\n            {properties.map((p) => (\r\n              <option key={p.id} value={p.id}>\r\n                {p.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {propertyId && (\r\n            <>\r\n              <div className=\"bg-neutral-900 border border-neutral-700 rounded p-6\">\r\n                <PropertyCalendar propertyId={propertyId} />\r\n              </div>\r\n\r\n              <div className=\"bg-neutral-900 border border-neutral-700 rounded p-6 space-y-3\">\r\n                <h2 className=\"font-semibold text-lg border-b border-neutral-700 pb-2\">\r\n                  Rooms\r\n                </h2>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  <input\r\n                    className=\"bg-neutral-800 border border-neutral-600 p-2 flex-1\"\r\n                    placeholder=\"Room name\"\r\n                    value={roomName}\r\n                    onChange={(e) => setRoomName(e.target.value)}\r\n                  />\r\n                  <input\r\n                    className=\"bg-neutral-800 border border-neutral-600 p-2 w-32\"\r\n                    placeholder=\"Price\"\r\n                    value={roomPrice}\r\n                    onChange={(e) => setRoomPrice(e.target.value)}\r\n                  />\r\n                  <button\r\n                    onClick={addRoom}\r\n                    className=\"bg-indigo-600 hover:bg-indigo-700 px-4\"\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n\r\n                {rooms.map((r) => (\r\n                  <div\r\n                    key={r.id}\r\n                    className=\"flex justify-between items-center border border-neutral-700 p-2 rounded\"\r\n                  >\r\n                    <div>\r\n                      {r.name} ‚Äî ‚Çπ{r.price}\r\n                    </div>\r\n                    <button\r\n                      onClick={() => toggleRoom(r.id, r.is_active)}\r\n                      className={`px-3 py-1 rounded ${\r\n                        r.is_active\r\n                          ? \"bg-green-600\"\r\n                          : \"bg-neutral-600\"\r\n                      }`}\r\n                    >\r\n                      {r.is_active ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","supabase","PropertyCalendar","LeadFunnelMetrics","OwnerDashboard","tab","setTab","owners","setOwners","ownerId","setOwnerId","properties","setProperties","propertyId","setPropertyId","leads","setLeads","phone","setPhone","checkIn","setCheckIn","checkOut","setCheckOut","rooms","setRooms","roomName","setRoomName","roomPrice","setRoomPrice","fetchOwners","fetchProperties","fetchLeads","fetchRooms","data","from","select","oid","eq","order","ascending","pid","sendLead","alert","lead","error","insert","owner_id","property_id","check_in","check_out","status","source","single","property","find","p","id","link","window","location","origin","slug","msg","name","open","encodeURIComponent","addRoom","price","Number","is_active","toggleRoom","isActive","update","statusColor","enquired","viewed","shortlisted","booked","dropped","map","t","charAt","toUpperCase","slice","e","target","value","o","email","l","length","r"],"mappings":"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","ignoreList":[]}}]
}