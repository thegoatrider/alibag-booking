(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,a,s)=>{a.exports=e.r(76562)},35687,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(17927),t=e.i(18566);function r(){let e=(0,t.useRouter)(),[r,n]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,p]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[x,b]=(0,s.useState)("hotel"),[v,g]=(0,s.useState)(""),[j,w]=(0,s.useState)("");(0,s.useEffect)(()=>{f(),y()},[]);let f=async()=>{let{data:e}=await l.supabase.from("owners").select("*");n(e||[])},y=async()=>{let{data:e}=await l.supabase.from("areas").select("*");o(e||[])},N=async e=>{let{data:a}=await l.supabase.from("properties").select("*").eq("owner_id",e);d(a||[])},S=async()=>{if(!u||!h||!v||!j)return alert("Fill all fields");await l.supabase.from("properties").insert({owner_id:u,name:h,type:x,area_id:v,starting_price:Number(j)}),m(""),w(""),N(u)};return(0,a.jsxs)("main",{className:"p-10 max-w-3xl space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Properties"}),(0,a.jsxs)("select",{className:"border p-2 w-full",value:u,onChange:e=>{p(e.target.value),N(e.target.value)},children:[(0,a.jsx)("option",{value:"",children:"Select Owner"}),r.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," — ",e.email]},e.id))]}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border p-6 rounded space-y-3",children:[(0,a.jsx)("h2",{className:"font-semibold",children:"Add Property"}),(0,a.jsx)("input",{className:"border p-2 w-full",placeholder:"Property name",value:h,onChange:e=>m(e.target.value)}),(0,a.jsxs)("select",{className:"border p-2 w-full",value:x,onChange:e=>b(e.target.value),children:[(0,a.jsx)("option",{value:"hotel",children:"Hotel"}),(0,a.jsx)("option",{value:"villa",children:"Villa"})]}),(0,a.jsxs)("select",{className:"border p-2 w-full",value:v,onChange:e=>g(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Area"}),i.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsx)("input",{className:"border p-2 w-full",placeholder:"Starting price",value:j,onChange:e=>w(e.target.value)}),(0,a.jsx)("button",{onClick:S,className:"bg-black text-white px-4 py-2",children:"Add Property"})]}),(0,a.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,a.jsxs)("div",{className:"border p-4 rounded",children:[e.name," (",e.type,") – ₹",e.starting_price]},e.id))}),(0,a.jsx)("button",{onClick:()=>e.push(`/dashboard/owner?owner_id=${u}`),className:"bg-green-600 text-white px-4 py-2 w-full",children:"Open Owner Dashboard"})]})]})}e.s(["default",()=>r])}]);